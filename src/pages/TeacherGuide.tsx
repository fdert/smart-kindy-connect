import { useState, useEffect, useRef } from 'react';
import { Card, CardContent, CardDescription, CardHeader, CardTitle } from '@/components/ui/card';
import { Button } from '@/components/ui/button';
import { Badge } from '@/components/ui/badge';
import { Tabs, TabsContent, TabsList, TabsTrigger } from '@/components/ui/tabs';
import { Accordion, AccordionContent, AccordionItem, AccordionTrigger } from '@/components/ui/accordion';
import { PageHeader } from '@/components/PageHeader';
import { useLanguage } from '@/hooks/useLanguage';
import { 
  Play, 
  Pause, 
  Volume2,
  VolumeX,
  School,
  Users, 
  Calendar, 
  Star, 
  BookOpen,
  Image,
  UserCheck,
  FileText,
  Settings,
  Brain,
  Award,
  NotebookPen,
  DollarSign,
  BarChart3,
  Shield,
  Video,
  Camera,
  MessageSquare,
  ClipboardList,
  PenTool,
  ChevronRight,
  Lightbulb,
  Target,
  CheckCircle2,
  PlayCircle,
  Headphones,
  Download,
  ExternalLink
} from 'lucide-react';

// Import real system images
import realDashboard from '@/assets/real-dashboard.jpg';
import realStudents from '@/assets/real-students.jpg';
import realClasses from '@/assets/real-classes.jpg';
import realAttendance from '@/assets/real-attendance.jpg';
import realAssignments from '@/assets/real-assignments.jpg';
import realRewards from '@/assets/real-rewards.jpg';
import realMedia from '@/assets/real-media.jpg';
import realNotes from '@/assets/real-notes.jpg';
import realAiAssistant from '@/assets/real-ai-assistant.jpg';
import realPermissions from '@/assets/real-permissions.jpg';
import realSurveys from '@/assets/real-surveys.jpg';
import realStudentReports from '@/assets/real-student-reports.jpg';

interface AudioState {
  isPlaying: boolean;
  currentAudio: HTMLAudioElement | null;
  isLoading: boolean;
  error: string | null;
}

interface GuideSection {
  id: string;
  title: string;
  description: string;
  icon: any;
  color: string;
  image?: string;
  steps: Array<{
    title: string;
    description: string;
    details: string[];
    tips?: string[];
  }>;
  audioText?: string;
}

const TeacherGuide = () => {
  const { t } = useLanguage();
  const [activeTab, setActiveTab] = useState('overview');
  const [audioState, setAudioState] = useState<AudioState>({
    isPlaying: false,
    currentAudio: null,
    isLoading: false,
    error: null
  });

  const guideData: GuideSection[] = [
    {
      id: 'dashboard',
      title: 'لوحة التحكم الرئيسية',
      description: 'نظرة عامة شاملة على أداء فصلك وطلابك مع إحصائيات مباشرة',
      icon: School,
      color: 'bg-blue-500',
      image: realDashboard,
      steps: [
        {
          title: 'بطاقات الإحصائيات التفاعلية',
          description: 'عرض ملخص تفصيلي ومباشر لأهم المؤشرات التعليمية',
          details: [
            'عدد الفصول المخصصة لك مع تفاصيل كل فصل',
            'إجمالي عدد الطلاب النشطين في جميع فصولك',
            'معدل الحضور اليومي بالنسبة المئوية',
            'عدد النجوم الممنوحة خلال الأسبوع الحالي',
            'الواجبات المعلقة التي تحتاج متابعة',
            'الأذونات والاستطلاعات النشطة'
          ],
          tips: [
            'تحديث الإحصائيات تلقائياً كل دقيقة لضمان دقة البيانات',
            'اضغط على أي بطاقة للانتقال مباشرة للتفاصيل الكاملة',
            'استخدم الألوان المختلفة لفهم الحالة سريعاً (أخضر=ممتاز، أصفر=يحتاج انتباه)'
          ]
        },
        {
          title: 'أدوات الوصول السريع',
          description: 'الانتقال المباشر لأهم الوظائف اليومية',
          details: [
            'إدارة ملفات الطلاب وبياناتهم الشخصية',
            'إعداد وتنظيم الفصول الدراسية',
            'تسجيل الحضور والغياب اليومي',
            'إنشاء وإدارة الواجبات والأنشطة',
            'منح المكافآت والنجوم للطلاب المميزين',
            'عرض وإدارة الملفات الإعلامية'
          ],
          tips: [
            'استخدم الاختصارات السريعة للوصول لأكثر الأدوات استخداماً',
            'يمكنك تخصيص ترتيب الأدوات حسب احتياجك اليومي'
          ]
        },
        {
          title: 'لوحة التنبيهات والإشعارات',
          description: 'متابعة التحديثات والمهام العاجلة',
          details: [
            'تنبيهات الحضور والغياب غير المعتاد',
            'تذكيرات بمواعيد استحقاق الواجبات',
            'إشعارات رسائل جديدة من الأهل',
            'تنبيهات المناسبات والفعاليات المدرسية'
          ]
        }
      ],
      audioText: 'مرحباً بك في دليل لوحة التحكم الخاصة بالمعلم. لوحة التحكم هي قلب النظام النابض، وهي المركز الرئيسي للتحكم الكامل في فصلك وإدارة طلابك بكفاءة عالية. من خلالها يمكنك مراقبة الأداء العام والحصول على نظرة شاملة وفورية عن حالة فصلك، بالإضافة للوصول السريع لجميع الأدوات والخدمات المتقدمة.'
    },
    {
      id: 'students',
      title: 'إدارة الطلاب',
      description: 'نظام شامل لإدارة ملفات الطلاب وبياناتهم التعليمية والشخصية',
      icon: Users,
      color: 'bg-green-500',
      image: realStudents,
      steps: [
        {
          title: 'عرض وإدارة قائمة الطلاب',
          description: 'استعراض شامل لجميع الطلاب في فصولك مع إمكانية البحث والفلترة',
          details: [
            'عرض البيانات الأساسية: الاسم الكامل، العمر، تاريخ الميلاد',
            'صورة شخصية لكل طالب لسهولة التعرف',
            'حالة نشاط الطالب (نشط/غير نشط/معلق)',
            'معلومات التواصل مع الأهل (هاتف، واتساب، إيميل)',
            'الفصل المسجل به الطالب مع إمكانية النقل',
            'تاريخ التسجيل ومدة الدراسة بالروضة',
            'المعلومات الطبية والحساسيات إن وجدت'
          ],
          tips: [
            'استخدم خاصية البحث السريع للعثور على طالب معين',
            'يمكنك فلترة الطلاب حسب الفصل أو الحالة',
            'الضغط على صورة الطالب يفتح ملفه الكامل'
          ]
        },
        {
          title: 'تحرير وتحديث ملفات الطلاب',
          description: 'تعديل شامل لبيانات الطلاب مع تتبع التغييرات',
          details: [
            'تعديل البيانات الشخصية والعائلية',
            'إضافة وتحديث الصورة الشخصية',
            'إدارة معلومات الاتصال الطارئ',
            'تسجيل المعلومات الصحية والطبية',
            'إضافة ملاحظات خاصة للمعلمين',
            'رفع وإدارة المستندات المطلوبة',
            'تتبع التطور الأكاديمي والاجتماعي'
          ],
          tips: [
            'احرص على تحديث بيانات الاتصال دورياً',
            'استخدم الملاحظات لتسجيل معلومات مهمة عن الطالب',
            'تأكد من صحة المعلومات الطبية قبل الحفظ'
          ]
        },
        {
          title: 'تقارير وإحصائيات الطلاب',
          description: 'عرض تقارير مفصلة عن أداء وتطور كل طالب',
          details: [
            'تقرير الحضور والغياب الشامل',
            'سجل الدرجات والتقييمات',
            'تطور المهارات والقدرات',
            'النشاطات والمشاركات',
            'المكافآت والإنجازات المحققة',
            'التواصل مع الأهل وتاريخ الرسائل'
          ]
        }
      ],
      audioText: 'إدارة الطلاب هي القلب النابض للنظام التعليمي وإحدى أهم الأدوات التي ستستخدمينها يومياً. من خلال هذا القسم، يمكنك الاطلاع على جميع المعلومات التفصيلية المتعلقة بطلابك، بدءاً من البيانات الشخصية والعائلية، مروراً بالمعلومات الصحية والطبية، وانتهاءً بسجل الأداء الأكاديمي والاجتماعي. كما يمكنك إدارة ملفاتهم الشخصية، وتحديث بياناتهم، ومتابعة تطورهم بكل سهولة ودقة.'
    },
    {
      id: 'classes',
      title: 'إدارة الفصول',
      description: 'تنظيم وإعداد الفصول الدراسية وتوزيع الطلاب والمعلمين',
      icon: BookOpen,
      color: 'bg-indigo-500',
      image: realClasses,
      steps: [
        {
          title: 'إعداد وإنشاء الفصول',
          description: 'إنشاء فصول جديدة وتحديد خصائصها التعليمية',
          details: [
            'إنشاء فصل جديد مع تحديد الاسم والوصف',
            'تحديد الفئة العمرية المستهدفة (من - إلى)',
            'تحديد الطاقة الاستيعابية لكل فصل',
            'تعيين المعلم المسؤول عن الفصل',
            'إعداد جدول الحصص اليومي',
            'تحديد قوانين وأنظمة الفصل الخاصة'
          ],
          tips: [
            'احرص على عدم تجاوز الطاقة الاستيعابية المحددة',
            'اختر أسماء واضحة ومميزة للفصول',
            'تأكد من توافق الفئة العمرية مع المنهج المقرر'
          ]
        },
        {
          title: 'إدارة الطلاب داخل الفصل',
          description: 'توزيع وتنظيم الطلاب في الفصول المختلفة',
          details: [
            'إضافة طلاب جدد للفصل',
            'نقل الطلاب بين الفصول حسب الحاجة',
            'عرض قائمة بجميع طلاب الفصل',
            'متابعة التوزيع العمري والجنسي',
            'إدارة قوائم الانتظار للفصول المكتملة',
            'تتبع معدل الحضور للفصل ككل'
          ]
        },
        {
          title: 'إعدادات الفصل المتقدمة',
          description: 'تخصيص إعدادات خاصة لكل فصل',
          details: [
            'تحديد أوقات الدوام الرسمية',
            'إعداد التقييمات والاختبارات الخاصة',
            'تخصيص أنشطة ومناهج إضافية',
            'إدارة موارد الفصل والأدوات التعليمية'
          ]
        }
      ],
      audioText: 'إدارة الفصول هي الأساس لتنظيم العملية التعليمية بطريقة فعالة. من خلال هذا النظام، يمكنك إنشاء وإعداد فصول متوازنة، وتوزيع الطلاب بناءً على الفئات العمرية والاحتياجات التعليمية، مما يضمن بيئة تعليمية مثالية لكل طالب.'
    },
    {
      id: 'attendance',
      title: 'الحضور والغياب',
      description: 'نظام متطور لتسجيل ومتابعة حضور الطلاب مع التنبيهات التلقائية',
      icon: UserCheck,
      color: 'bg-orange-500',
      image: realAttendance,
      steps: [
        {
          title: 'تسجيل الحضور اليومي السريع',
          description: 'تسجيل حضور وغياب جميع الطلاب بطريقة سريعة وفعالة',
          details: [
            'عرض قائمة جميع طلاب الفصل مع صورهم',
            'تحديد حالة كل طالب: حاضر، غائب، متأخر، خروج مبكر',
            'تسجيل وقت الوصول والمغادرة بدقة',
            'إضافة ملاحظات تفصيلية لحالات الغياب أو التأخير',
            'إرسال إشعارات فورية للأهل عبر الواتساب',
            'طباعة تقرير الحضور اليومي بتفاصيل كاملة',
            'تصدير البيانات للأرشيف'
          ],
          tips: [
            'ابدأ تسجيل الحضور فور دخول الطلاب لضمان الدقة',
            'استخدم الملاحظات لتوثيق أسباب التأخير أو الغياب',
            'راجع قائمة الحضور قبل إرسال التقرير النهائي'
          ]
        },
        {
          title: 'نظام التنبيهات الذكي',
          description: 'إرسال تنبيهات تلقائية للأهل والإدارة',
          details: [
            'إشعار فوري للأهل عند عدم حضور الطالب',
            'تنبيه عند التأخير المتكرر للطالب',
            'إشعار الإدارة بحالات الغياب غير المبررة',
            'تذكير الأهل بأهمية الانتظام في الحضور',
            'تقرير أسبوعي بمعدل حضور كل طالب'
          ]
        },
        {
          title: 'تقارير وإحصائيات الحضور المتقدمة',
          description: 'عرض إحصائيات تفصيلية وتحليلات دقيقة',
          details: [
            'تقارير يومية وأسبوعية وشهرية وسنوية',
            'معدل حضور كل طالب بالنسبة المئوية',
            'تحليل أنماط الغياب والتأخير',
            'مقارنة معدلات الحضور بين الفصول المختلفة',
            'إحصائيات عامة للروضة ككل',
            'رسوم بيانية توضح تطور معدل الحضور'
          ]
        }
      ],
      audioText: 'نظام الحضور والغياب هو أحد أهم الأدوات لضمان متابعة دقيقة لحضور طلابك. يساعدك هذا النظام في تسجيل الحضور بسرعة وكفاءة عالية، مع إرسال تقارير تلقائية للأهل لإبقائهم على اطلاع دائم بحضور أطفالهم، بالإضافة لتوفير تحليلات متقدمة تساعدك في تتبع أنماط الحضور والتعامل مع حالات التأخير أو الغياب المتكرر.'
    },
    {
      id: 'assignments',
      title: 'إدارة الواجبات والأنشطة',
      description: 'نظام شامل لإنشاء وإدارة وتقييم الواجبات والأنشطة التعليمية',
      icon: FileText,
      color: 'bg-purple-500',
      image: realAssignments,
      steps: [
        {
          title: 'إنشاء واجبات وأنشطة متنوعة',
          description: 'تصميم واجبات تفاعلية ومتنوعة تناسب جميع المستويات',
          details: [
            'إنشاء واجبات تعليمية بعنوان ووصف مفصل',
            'تحديد نوع النشاط: واجب منزلي، نشاط صفي، مشروع جماعي',
            'رفع ملفات مرفقة: صور، مستندات، ملفات صوتية',
            'تحديد تاريخ الاستحقاق ووقت التسليم بدقة',
            'اختيار الطلاب المستهدفين: فرد، مجموعة، أو الفصل كاملاً',
            'تحديد مستوى الأولوية: عادي، مهم، عاجل',
            'إضافة معايير التقييم والدرجات المتوقعة',
            'ربط الواجب بالمنهج والوحدة التعليمية'
          ],
          tips: [
            'استخدم وصفاً واضحاً ومحدداً لكل واجب',
            'أرفق أمثلة توضيحية لمساعدة الطلاب',
            'حدد مواعيد استحقاق واقعية ومناسبة لعمر الطلاب'
          ]
        },
        {
          title: 'متابعة تسليم الواجبات',
          description: 'تتبع حالة تسليم كل طالب ومتابعة التقدم',
          details: [
            'عرض قائمة بجميع الطلاب وحالة تسليمهم',
            'تمييز الطلاب الذين سلموا في الوقت المحدد',
            'تحديد الطلاب المتأخرين في التسليم',
            'عرض محتوى ما سلمه كل طالب',
            'إرسال تذكيرات للطلاب المتأخرين',
            'تنبيه الأهل بمواعيد استحقاق الواجبات'
          ]
        },
        {
          title: 'تقييم وتصحيح الواجبات',
          description: 'مراجعة شاملة وتقييم عادل لإجابات الطلاب',
          details: [
            'عرض إجابات الطلاب بطريقة منظمة وسهلة',
            'إضافة درجات رقمية أو تقييمات وصفية',
            'كتابة تعليقات بناءة وملاحظات تطويرية',
            'استخدام الرموز التعبيرية والملصقات التحفيزية',
            'تسجيل ملاحظات صوتية للطلاب الصغار',
            'إرسال النتائج والتقييمات للأهل مباشرة',
            'إنشاء تقارير فردية وجماعية للأداء'
          ]
        },
        {
          title: 'تحليل الأداء والتطوير',
          description: 'استخدام البيانات لتحسين العملية التعليمية',
          details: [
            'تحليل معدل أداء الفصل في كل واجب',
            'تحديد نقاط القوة والضعف العامة',
            'متابعة تطور كل طالب عبر الواجبات',
            'اقتراح أنشطة إضافية للطلاب المتعثرين',
            'مكافأة الطلاب المتميزين بنجوم إضافية'
          ]
        }
      ],
      audioText: 'إدارة الواجبات والأنشطة هي أداة قوية تمكنك من تصميم تجربة تعليمية غنية ومتنوعة لطلابك. من خلال هذا النظام، يمكنك إنشاء واجبات تفاعلية تناسب مختلف أنماط التعلم، ومتابعة تقدم كل طالب بشكل فردي، وتقديم تقييمات بناءة تساعد في تطوير قدراتهم. كما يساعدك في إشراك الأهل في العملية التعليمية من خلال إرسال التقييمات والتحديثات المستمرة.'
    },
    {
      id: 'rewards',
      title: 'نظام المكافآت والتحفيز',
      description: 'نظام متطور لتحفيز الطلاب ومكافأتهم على السلوك الإيجابي والإنجازات',
      icon: Award,
      color: 'bg-yellow-500',
      image: realRewards,
      steps: [
        {
          title: 'منح النجوم والنقاط التحفيزية',
          description: 'تحفيز الطلاب من خلال نظام نقاط ذكي ومتنوع',
          details: [
            'منح نجوم للسلوك الإيجابي والتفاعل الجيد',
            'إضافة نقاط للإنجازات الأكاديمية والتميز',
            'تحديد سبب مفصل لكل نجمة أو نقطة ممنوحة',
            'اختيار نوع المكافأة: سلوك، إنجاز، مساعدة، إبداع',
            'إضافة وصف تحفيزي وكلمات تشجيعية',
            'اختيار لون ورمز النجمة حسب نوع الإنجاز',
            'منح مكافآت جماعية للفصل أو المجموعة',
            'إرسال بطاقة تهنئة للأهل مع تفاصيل الإنجاز'
          ],
          tips: [
            'اربط كل مكافأة بسلوك أو إنجاز محدد لتعزيز التعلم',
            'استخدم كلمات تحفيزية إيجابية ومناسبة للعمر',
            'نوع في أسباب المكافآت لتشمل جوانب متعددة من شخصية الطالب'
          ]
        },
        {
          title: 'إدارة رصيد الطلاب ومتابعة التقدم',
          description: 'متابعة شاملة لرصيد كل طالب وتقدمه في النظام',
          details: [
            'عرض رصيد النجوم والنقاط لكل طالب',
            'تاريخ مفصل لجميع المكافآت الممنوحة',
            'إحصائيات أسبوعية وشهرية للإنجازات',
            'مقارنة الأداء بالفترات السابقة',
            'عرض الطلاب الأكثر تميزاً في الفصل',
            'تقارير تطور السلوك الإيجابي',
            'نظام تصنيف وترتيب الطلاب'
          ]
        },
        {
          title: 'إدارة المكافآت والجوائز الفعلية',
          description: 'تنظيم نظام استبدال النقاط بجوائز حقيقية',
          details: [
            'إنشاء كتالوج للجوائز المتاحة مع صور',
            'تحديد عدد النقاط المطلوبة لكل جائزة',
            'تسجيل عمليات استبدال النجوم بالجوائز',
            'متابعة مخزون الجوائز المتاحة',
            'إشعار الأهل عند استبدال الطفل لجائزة',
            'تقارير المكافآت الممنوحة والمستبدلة',
            'تحفيز المنافسة الشريفة بين الطلاب',
            'إعداد مراسم تكريم للطلاب المتميزين'
          ]
        },
        {
          title: 'أنواع المكافآت المتخصصة',
          description: 'تنويع المكافآت لتشمل جوانب مختلفة من التطور',
          details: [
            'مكافآت السلوك الاجتماعي والتعاون',
            'مكافآت الإبداع والتفكير النقدي',
            'مكافآت الحضور والانضباط',
            'مكافآت المساعدة وخدمة الآخرين',
            'مكافآت التقدم الأكاديمي',
            'مكافآت النظافة والترتيب',
            'شهادات تقدير مخصصة بأسماء الطلاب'
          ]
        }
      ],
      audioText: 'نظام المكافآت والتحفيز هو أداة تربوية قوية ومؤثرة تساعدك في بناء شخصية إيجابية لدى الطلاب وتعزيز سلوكياتهم المرغوبة. من خلال هذا النظام المتطور، يمكنك منح النجوم والنقاط بطريقة مدروسة وهادفة، ومتابعة تطور كل طالب، وخلق بيئة تنافسية صحية تحفز جميع الأطفال على التميز والإبداع. كما يساعد في إشراك الأهل في الاحتفال بإنجازات أطفالهم ومتابعة تقدمهم.'
    },
    {
      id: 'media',
      title: 'الملفات الإعلامية وإدارة الذكريات',
      description: 'نظام متطور لتوثيق ومشاركة لحظات الطلاب التعليمية والترفيهية',
      icon: Image,
      color: 'bg-pink-500',
      image: realMedia,
      steps: [
        {
          title: 'رفع وتوثيق الصور والفيديوهات',
          description: 'توثيق احترافي لجميع أنشطة وإنجازات الطلاب',
          details: [
            'التقاط صور مباشرة من كاميرا الجهاز أو رفع ملفات محفوظة',
            'رفع فيديوهات قصيرة لتوثيق الأنشطة التفاعلية',
            'تحديد الطلاب الظاهرين في كل صورة أو فيديو',
            'إضافة عناوين ووصف مفصل لكل نشاط',
            'تصنيف الملفات حسب نوع النشاط: تعليمي، ترفيهي، رياضي، فني',
            'إضافة تاريخ ووقت النشاط تلقائياً',
            'تنظيم الملفات في ألبومات مواضيعية',
            'ضبط جودة الصور ودقة الفيديو لضمان وضوح المحتوى'
          ],
          tips: [
            'التقط الصور من زوايا مختلفة لتوثيق النشاط كاملاً',
            'تأكد من إضاءة جيدة للحصول على صور واضحة',
            'احرص على تضمين جميع الطلاب المشاركين في النشاط'
          ]
        },
        {
          title: 'إدارة وتنظيم المكتبة الإعلامية',
          description: 'نظام ذكي لتنظيم وأرشفة جميع الملفات',
          details: [
            'إنشاء ألبومات مخصصة لكل فصل أو نشاط',
            'تصنيف الصور حسب التاريخ والموضوع',
            'نظام بحث متقدم للعثور على صور معينة',
            'إمكانية تحرير وتعديل الصور الأساسي',
            'إضافة علامات وتسميات للملفات',
            'إنشاء معارض صور تفاعلية',
            'نسخ احتياطي تلقائي للملفات المهمة'
          ]
        },
        {
          title: 'مشاركة المحتوى مع الأهل',
          description: 'إرسال تلقائي وآمن للملفات الإعلامية للعائلات',
          details: [
            'إرسال تلقائي عبر الواتساب لأهل الطلاب المشاركين',
            'إنشاء ألبومات شخصية لكل طالب وإرسالها للأهل',
            'تقارير مصورة يومية أو أسبوعية للأنشطة',
            'إمكانية تحميل الأهل للصور والفيديوهات',
            'إرسال تحديثات فورية عند رفع محتوى جديد',
            'حماية خصوصية الملفات وضمان وصولها للأهل المناسبين فقط',
            'إحصائيات مشاهدة وتفاعل الأهل مع المحتوى'
          ]
        },
        {
          title: 'ميزات إضافية ومتقدمة',
          description: 'أدوات احترافية لتحسين تجربة التوثيق والمشاركة',
          details: [
            'إنشاء فيديوهات تجميعية للأنشطة الشهرية',
            'طباعة ألبومات ذكريات نهاية العام',
            'مشاركة الإنجازات في وسائل التواصل الاجتماعي',
            'إنشاء عروض تقديمية تفاعلية للأنشطة',
            'تصدير الملفات بجودة عالية للأرشيف',
            'ربط الصور بالأنشطة التعليمية والواجبات',
            'إنشاء بطاقات ذكريات مخصصة لكل طالب'
          ]
        }
      ],
      audioText: 'الملفات الإعلامية وإدارة الذكريات هي نافذة سحرية تتيح لك توثيق اللحظات الثمينة من رحلة التعلم والنمو لطلابك. من خلال هذا النظام المتطور، يمكنك التقاط وحفظ كل لحظة مميزة، وتنظيمها بطريقة احترافية، ومشاركتها مع الأهل فوراً، مما يعزز التواصل والشراكة بين البيت والروضة، ويخلق أرشيفاً ثميناً من الذكريات الجميلة التي ستبقى محفورة في قلوب الأطفال وعائلاتهم للأبد.'
    },
    {
      id: 'notes',
      title: 'ملاحظات الطلاب وتتبع التطور',
      description: 'نظام شامل لتوثيق وتتبع تطور الطلاب الأكاديمي والاجتماعي والسلوكي',
      icon: NotebookPen,
      color: 'bg-indigo-500',
      image: realNotes,
      steps: [
        {
          title: 'كتابة الملاحظات التفصيلية',
          description: 'توثيق دقيق ومفصل لجميع جوانب تطور الطالب',
          details: [
            'ملاحظات السلوك اليومي والتفاعل الاجتماعي',
            'تقييم الأداء الأكاديمي في المواد المختلفة',
            'رصد التطور في المهارات الحركية الدقيقة والكبيرة',
            'ملاحظات التطور اللغوي والتعبيري',
            'تسجيل المواهب والقدرات الخاصة',
            'توثيق التحديات والصعوبات التعليمية',
            'ملاحظات الاستقلالية والاعتماد على الذات',
            'تقييم مهارات التواصل والتعبير عن المشاعر'
          ],
          tips: [
            'كن محدداً وموضوعياً في كتابة الملاحظات',
            'استخدم أمثلة محددة لتوضيح السلوكيات',
            'ركز على الجوانب الإيجابية والإنجازات أيضاً'
          ]
        },
        {
          title: 'تصنيف وتنظيم الملاحظات',
          description: 'نظام ذكي لتصنيف الملاحظات حسب النوع والأهمية',
          details: [
            'تصنيف حسب نوع الملاحظة: أكاديمي، سلوكي، اجتماعي',
            'تحديد مستوى الأهمية: عادي، مهم، عاجل',
            'ربط الملاحظات بالمناهج والأنشطة المحددة',
            'إضافة تاريخ ووقت كل ملاحظة تلقائياً',
            'إمكانية إضافة صور أو مقاطع صوتية توضيحية',
            'تحديد ما إذا كانت الملاحظة تحتاج متابعة خاصة',
            'ربط الملاحظات بأهداف التطوير الشخصي للطالب'
          ]
        },
        {
          title: 'تتبع التطور عبر الزمن',
          description: 'متابعة مستمرة لرحلة نمو وتطور كل طالب',
          details: [
            'إنشاء سجل تاريخي شامل لكل طالب',
            'مقارنة التطور بين الفترات الزمنية المختلفة',
            'رسوم بيانية توضح منحنى التقدم',
            'تحديد نمط النمو والتطور الفردي',
            'رصد التحسن في المهارات المختلفة',
            'تتبع فعالية الاستراتيجيات التعليمية المطبقة',
            'توثيق النقلات التطويرية المهمة'
          ]
        },
        {
          title: 'التواصل مع الأهل والتقارير',
          description: 'مشاركة فعالة للملاحظات مع العائلة وإعداد تقارير دورية',
          details: [
            'إرسال تقارير دورية مفصلة للأهل',
            'مشاركة الملاحظات الإيجابية فوراً عبر الواتساب',
            'إعداد تقارير تقدم شهرية وفصلية',
            'توصيات محددة للأهل لدعم التطور في المنزل',
            'خطط تحسين مخصصة لكل طالب',
            'جدولة لقاءات مع الأهل لمناقشة التطور',
            'تنسيق الجهود بين البيت والروضة لدعم الطالب'
          ]
        },
        {
          title: 'الذكاء الاصطناعي في تحليل الملاحظات',
          description: 'استخدام تقنيات متقدمة لتحليل البيانات وتقديم رؤى عميقة',
          details: [
            'تحليل أنماط السلوك والتعلم',
            'اقتراحات تلقائية لاستراتيجيات التحسين',
            'تحديد المواهب والقدرات الكامنة',
            'التنبؤ بالتحديات المحتملة ووضع خطط وقائية',
            'مقارنة تطور الطالب مع المعايير العمرية',
            'اقتراح أنشطة مخصصة حسب نمط تعلم الطالب'
          ]
        }
      ],
      audioText: 'ملاحظات الطلاب وتتبع التطور هو نظام علمي متطور يساعدك في رسم صورة شاملة ودقيقة عن رحلة نمو كل طالب. من خلال التوثيق المنهجي والمتابعة المستمرة، يمكنك بناء ملف تطوير شخصي لكل طفل يساعد في فهم احتياجاته وقدراته، وتطوير استراتيجيات تعليمية مخصصة، وإشراك الأهل كشركاء فاعلين في رحلة التعلم والنمو.'
    },
    {
      id: 'ai-assistant',
      title: 'المساعد الذكي التعليمي',
      description: 'نظام ذكاء اصطناعي متطور لدعم المعلمين وتحسين العملية التعليمية',
      icon: Brain,
      color: 'bg-cyan-500',
      image: realAiAssistant,
      steps: [
        {
          title: 'تحليل الأداء والبيانات التعليمية',
          description: 'تحليل ذكي ومتقدم لجميع جوانب العملية التعليمية',
          details: [
            'تحليل أنماط الحضور والغياب لكل طالب وتحديد الأسباب المحتملة',
            'رصد تطور الأداء الأكاديمي عبر الزمن بطريقة بصرية',
            'تحديد الطلاب الذين يحتاجون لاهتمام ودعم إضافي',
            'تحليل فعالية استراتيجيات التدريس المختلفة',
            'توقعات مبنية على البيانات للأداء المستقبلي',
            'مقارنة أداء الفصل مع المعايير التعليمية',
            'تحديد أفضل أوقات التعلم لكل طالب'
          ]
        },
        {
          title: 'المساعدة في التخطيط التعليمي',
          description: 'اقتراحات ذكية لتطوير وتحسين العملية التعليمية',
          details: [
            'أفكار إبداعية للأنشطة التعليمية حسب عمر الطلاب',
            'استراتيجيات متقدمة لإدارة الفصل والحفاظ على الانضباط',
            'خطط دراسية مخصصة لكل طالب حسب احتياجاته',
            'نصائح للتعامل مع التحديات السلوكية المختلفة',
            'اقتراحات لأنشطة تفاعلية تناسب أنماط التعلم المختلفة',
            'خطط علاجية للطلاب الذين يواجهون صعوبات',
            'أفكار لربط التعلم بالحياة العملية والواقع'
          ]
        },
        {
          title: 'التحليل السلوكي والاجتماعي',
          description: 'فهم عميق لسلوكيات الطلاب وديناميكيات الفصل',
          details: [
            'تحليل الأنماط السلوكية وتحديد المحفزات',
            'رصد التفاعلات الاجتماعية بين الطلاب',
            'اقتراحات لتعزيز الثقة بالنفس لدى الطلاب',
            'استراتيجيات للتعامل مع الطلاب الخجولين أو المنطوين',
            'خطط لتطوير المهارات الاجتماعية',
            'تحديد القادة الطبيعيين في الفصل وتوجيه قدراتهم',
            'اقتراحات لأنشطة بناء الثقة والتعاون'
          ]
        },
        {
          title: 'الدعم الفوري والإرشاد المباشر',
          description: 'مساعدة لحظية في المواقف التعليمية المختلفة',
          details: [
            'إجابات فورية على الاستفسارات التعليمية',
            'نصائح سريعة للتعامل مع المواقف الطارئة',
            'اقتراحات بديلة عند فشل استراتيجية معينة',
            'إرشادات للتواصل الفعال مع الأهل',
            'نماذج رسائل وتقارير جاهزة قابلة للتخصيص',
            'دليل سريع لحل المشكلات الشائعة في الفصل'
          ]
        },
        {
          title: 'التطوير المهني المستمر',
          description: 'دعم نمو المعلم وتطوير مهاراته باستمرار',
          details: [
            'اقتراحات لتطوير المهارات التعليمية الشخصية',
            'توصيات لدورات ومواد تدريبية مناسبة',
            'تحليل نقاط القوة والمجالات التي تحتاج تطوير',
            'أفكار لتجديد وتطوير طرق التدريس',
            'نصائح للحفاظ على التوازن بين العمل والحياة',
            'استراتيجيات للتعامل مع ضغوط العمل والاحتراق المهني'
          ]
        }
      ],
      audioText: 'المساعد الذكي التعليمي هو رفيقك الدائم في رحلة التعليم والتطوير. هذا النظام المتطور يجمع بين قوة الذكاء الاصطناعي وخبرات تعليمية واسعة لتقديم دعم شامل ومخصص لك كمعلمة. من تحليل البيانات وفهم احتياجات الطلاب، إلى اقتراح الأنشطة المبتكرة ووضع الخطط العلاجية، يساعدك المساعد الذكي في اتخاذ قرارات مدروسة ومبنية على أسس علمية، مما يرفع من جودة التعليم ويحسن من تجربة التعلم لجميع الطلاب.'
    },
    {
      id: 'permissions',
      title: 'إدارة الأذونات',
      description: 'نظام شامل لإنشاء وإرسال أذونات النشاطات والرحلات للأهالي مع متابعة الردود',
      icon: Shield,
      color: 'bg-cyan-500',
      image: realPermissions,
      steps: [
        {
          title: 'إنشاء إذن جديد للنشاطات والرحلات',
          description: 'تصميم أذونات مخصصة للحصول على موافقة الأهل للأنشطة المختلفة',
          details: [
            'إنشاء إذن جديد بعنوان واضح ومحدد للنشاط أو الرحلة',
            'كتابة وصف تفصيلي يشمل: الهدف، التاريخ، المكان، الوقت، المتطلبات',
            'تحديد خيارات الرد المتاحة: موافق، غير موافق، أحتاج تفاصيل إضافية',
            'إضافة تفاصيل مهمة مثل: التكلفة، ما يجب إحضاره، الملابس المناسبة',
            'تحديد تاريخ انتهاء صلاحية الإذن والموعد النهائي للرد',
            'اختيار الطلاب المستهدفين: طلاب محددين، فصل كامل، أو عدة فصول',
            'إضافة معلومات التواصل في حالة الاستفسارات',
            'رفع صور توضيحية أو مستندات مرفقة إن وجدت'
          ],
          tips: [
            'كن واضحاً ومحدداً في وصف النشاط لتجنب سوء الفهم',
            'اذكر جميع التفاصيل المهمة التي قد يحتاجها الأهل لاتخاذ القرار',
            'حدد موعداً نهائياً واقعياً للرد يتيح للأهل وقت كافي للتفكير'
          ]
        },
        {
          title: 'إرسال ومتابعة الأذونات',
          description: 'إرسال الأذونات للأهالي ومتابعة حالة الردود والموافقات',
          details: [
            'إرسال الإذن مباشرة عبر الواتساب لجميع أولياء الأمور المعنيين',
            'عرض قائمة شاملة بجميع الأذونات: المرسلة، النشطة، المنتهية الصلاحية',
            'متابعة حالة كل طالب: لم يرد، وافق، رفض، طلب تفاصيل إضافية',
            'عرض إحصائيات سريعة: عدد الموافقات، الرفض، عدم الرد',
            'إرسال تذكيرات تلقائية للأهل الذين لم يردوا بعد',
            'عرض تفاصيل رد كل ولي أمر مع التاريخ والوقت',
            'تحميل تقرير شامل بجميع الردود والموافقات',
            'إمكانية تعديل الإذن أو إلغاؤه قبل انتهاء المهلة'
          ]
        },
        {
          title: 'تحليل الردود والتقارير',
          description: 'تحليل مفصل لردود الأهالي وإنشاء تقارير شاملة',
          details: [
            'عرض نسبة المشاركة والتفاعل لكل إذن',
            'تحليل أسباب الموافقة أو الرفض من تعليقات الأهل',
            'تقرير تفصيلي بأسماء الطلاب المشاركين وغير المشاركين',
            'إحصائيات عامة عن مدى تجاوب الأهل مع الأنشطة',
            'تصدير قوائم المشاركين لتسهيل التنظيم',
            'أرشيف شامل لجميع الأذونات السابقة للرجوع إليها',
            'تقارير دورية عن مستوى المشاركة في الأنشطة'
          ]
        }
      ],
      audioText: 'نظام إدارة الأذونات هو أداة متطورة تضمن التواصل الفعال مع الأهالي حول الأنشطة والرحلات المدرسية. يساعدك هذا النظام في الحصول على موافقات مدروسة من الأهل، مع ضمان وصول المعلومات كاملة وواضحة لهم، بالإضافة لمتابعة دقيقة للردود وتنظيم المشاركات بكفاءة عالية.'
    },
    {
      id: 'surveys',
      title: 'إدارة الاستطلاعات',
      description: 'نظام متقدم لإنشاء وإدارة استطلاعات تفاعلية مع تحليل النتائج والإحصائيات',
      icon: BarChart3,
      color: 'bg-teal-500',
      image: realSurveys,
      steps: [
        {
          title: 'إنشاء استطلاعات تفاعلية ومتنوعة',
          description: 'تصميم استطلاعات شاملة لجمع آراء الأهالي حول مختلف الجوانب التعليمية',
          details: [
            'إنشاء استطلاع جديد بعنوان جذاب ووصف مفصل للهدف',
            'إضافة أسئلة متنوعة: اختيار متعدد، نعم/لا، تقييم بالنجوم، أسئلة مفتوحة',
            'تخصيص خيارات الإجابة لكل سؤال حسب الحاجة والهدف',
            'إضافة أسئلة شرطية تظهر بناءً على إجابات سابقة',
            'تحديد مدة الاستطلاع وتاريخ انتهاء صلاحيته',
            'اختيار الفئة المستهدفة: أهالي طلاب معينين، فصل، أو جميع الأهالي',
            'إضافة صور أو ملفات توضيحية للاستطلاع',
            'تحديد ما إذا كان الاستطلاع إجبارياً أم اختيارياً'
          ],
          tips: [
            'اجعل الأسئلة واضحة ومحددة لتحصل على إجابات دقيقة',
            'استخدم أنواع أسئلة مختلفة لتجنب الملل وزيادة التفاعل',
            'احرص على عدم الإفراط في عدد الأسئلة لضمان إكمال الاستطلاع'
          ]
        },
        {
          title: 'إرسال ومراقبة الاستطلاعات',
          description: 'إرسال الاستطلاعات ومتابعة معدلات الاستجابة والمشاركة',
          details: [
            'إرسال الاستطلاع فوري عبر رسائل الواتساب المخصصة',
            'عرض حالة كل ولي أمر: لم يشارك، شارك جزئياً، أكمل الاستطلاع',
            'متابعة معدل الاستجابة ونسبة الإكمال في الوقت الفعلي',
            'إرسال تذكيرات تلقائية للأهل الذين لم يشاركوا بعد',
            'عرض الإحصائيات الأولية للنتائج أثناء فترة الاستطلاع',
            'إمكانية إغلاق الاستطلاع مبكراً أو تمديد المدة',
            'تتبع الوقت المستغرق لإكمال كل استطلاع',
            'عرض التقدم اليومي في عدد المشاركات'
          ]
        },
        {
          title: 'تحليل النتائج والإحصائيات المتقدمة',
          description: 'تحليل شامل ومفصل لنتائج الاستطلاع مع رسوم بيانية توضيحية',
          details: [
            'عرض النتائج في رسوم بيانية متنوعة: دائرية، أعمدة، خطوط',
            'تحليل الإجابات حسب الفئات المختلفة: الفصل، العمر، الجنس',
            'إحصائيات تفصيلية لكل سؤال على حدة',
            'تحليل الاتجاهات والأنماط في الإجابات',
            'مقارنة النتائج مع استطلاعات سابقة مشابهة',
            'تحديد النقاط المشتركة والاختلافات في الآراء',
            'إنشاء تقارير تلقائية جاهزة للمشاركة',
            'تصدير النتائج في ملفات إكسل أو PDF للأرشفة',
            'اقتراحات تلقائية للتحسين بناءً على النتائج'
          ]
        },
        {
          title: 'تطوير خطط العمل والمتابعة',
          description: 'تحويل نتائج الاستطلاعات إلى خطط عملية قابلة للتنفيذ',
          details: [
            'تحليل نقاط القوة والضعف من وجهة نظر الأهالي',
            'وضع خطة عمل لمعالجة المجالات التي تحتاج تحسين',
            'تحديد الأولويات بناءً على أهمية كل مجال للأهالي',
            'تتبع تقدم تنفيذ الإجراءات التصحيحية',
            'إنشاء استطلاعات متابعة لقياس التحسن',
            'مشاركة النتائج والخطط مع الإدارة والمعلمين',
            'أرشفة شاملة لجميع الاستطلاعات والنتائج'
          ]
        }
      ],
      audioText: 'نظام إدارة الاستطلاعات يوفر لك أداة قوية لفهم آراء الأهالي وتوقعاتهم، مما يساعد في تطوير العملية التعليمية بناءً على احتياجات حقيقية. من خلال الاستطلاعات التفاعلية والتحليلات المتقدمة، يمكنك اتخاذ قرارات مدروسة تعزز من جودة التعليم ورضا الأهالي.'
    },
    {
      id: 'reports',
      title: 'التقارير الشاملة للطلاب',
      description: 'نظام متقدم لإنشاء وإرسال تقارير تفصيلية شاملة عن كل طالب لأولياء الأمور',
      icon: FileText,
      color: 'bg-rose-500',
      image: realStudentReports,
      steps: [
        {
          title: 'إنشاء تقرير شامل للطالب',
          description: 'تجميع جميع بيانات الطالب في تقرير واحد متكامل وشامل',
          details: [
            'معلومات الطالب الأساسية: الاسم، العمر، الفصل، الصورة',
            'سجل الحضور والغياب مع نسب مئوية ورسوم بيانية',
            'تقييم الواجبات والأنشطة مع الدرجات والملاحظات',
            'المكافآت والإنجازات المحققة خلال فترة التقرير',
            'الملاحظات السلوكية والتطويرية من المعلمين',
            'الفحوصات الصحية ومتابعة النمو والتطور',
            'تقييم المهارات التعليمية والاجتماعية المكتسبة',
            'معرض الأعمال والأنشطة (صور ومقاطع فيديو)',
            'توصيات لتطوير الطالب في المنزل',
            'خطة تطوير مستقبلية مخصصة للطالب'
          ],
          tips: [
            'اجمع البيانات من جميع الأقسام لضمان التقرير الشامل',
            'استخدم رسوم بيانية وصور لجعل التقرير أكثر وضوحاً',
            'اكتب ملاحظات إيجابية ومحفزة للطالب والأهل'
          ]
        },
        {
          title: 'تخصيص وتصميم التقرير',
          description: 'تخصيص شكل ومحتوى التقرير ليناسب كل طالب وعائلة',
          details: [
            'اختيار فترة التقرير: أسبوعي، شهري، فصلي، سنوي',
            'تحديد الأقسام المراد تضمينها في التقرير',
            'إضافة شعار الروضة ومعلومات التواصل',
            'تخصيص الألوان والتصميم ليناسب هوية الروضة',
            'إضافة رسالة شخصية من المعلمة للأهل',
            'تحديد اللغة (عربي، إنجليزي، أو ثنائي اللغة)',
            'إضافة توقيع المعلمة وختم الروضة الرسمي',
            'اختيار تنسيق الإخراج: PDF، عرض تقديمي، أو تقرير تفاعلي'
          ]
        },
        {
          title: 'إرسال التقرير للأهالي',
          description: 'إرسال التقرير بطرق متعددة مع ضمان الوصول والحفاظ على الخصوصية',
          details: [
            'إنشاء رابط آمن ومشفر لكل ولي أمر لعرض التقرير',
            'إرسال الرابط عبر الواتساب مع رسالة ترحيبية شخصية',
            'إرسال نسخة PDF عبر الإيميل كنسخة احتياطية',
            'تحديد صلاحية الرابط (24 ساعة، أسبوع، شهر)',
            'حماية التقرير برمز سري أو تأكيد الهوية',
            'تتبع من اطلع على التقرير ومتى',
            'إرسال تذكيرات للأهل الذين لم يطلعوا على التقرير',
            'إمكانية السماح بتحميل أو طباعة التقرير'
          ]
        },
        {
          title: 'متابعة تفاعل الأهل والتحسين المستمر',
          description: 'متابعة استقبال الأهل للتقارير وتحسين جودتها باستمرار',
          details: [
            'إحصائيات عن معدل اطلاع الأهل على التقارير',
            'تتبع الوقت المستغرق في قراءة كل قسم من التقرير',
            'جمع تقييمات الأهل حول مفيدة ووضوح التقرير',
            'تحليل الأقسام الأكثر اهتماماً من قبل الأهل',
            'تحسين تصميم ومحتوى التقارير بناءً على الملاحظات',
            'أرشيف شامل لجميع التقارير السابقة للطالب',
            'مقارنة تطور الطالب عبر التقارير المختلفة',
            'إنشاء نماذج محسنة للتقارير المستقبلية'
          ]
        }
      ],
      audioText: 'نظام التقارير الشاملة للطلاب يوفر للأهالي صورة كاملة ومتكاملة عن تطور ونمو أطفالهم في الروضة. هذه التقارير التفاعلية والمفصلة تعزز التواصل بين البيت والمدرسة، وتساعد الأهل في فهم نقاط القوة والمجالات التي تحتاج تطوير لدى أطفالهم، مما يمكنهم من دعم التعلم والنمو في المنزل بطريقة فعالة ومدروسة.'
    }
  ];

  // ElevenLabs TTS function
  const playTextToSpeech = async (text: string) => {
    setAudioState(prev => ({ ...prev, isLoading: true, error: null }));
    
    try {
      // For demo purposes, using Web Speech API
      if ('speechSynthesis' in window) {
        const utterance = new SpeechSynthesisUtterance(text);
        utterance.lang = 'ar-SA';
        utterance.rate = 0.8;
        utterance.pitch = 1;
        
        utterance.onstart = () => {
          setAudioState(prev => ({ 
            ...prev, 
            isPlaying: true, 
            isLoading: false 
          }));
        };
        
        utterance.onend = () => {
          setAudioState(prev => ({ 
            ...prev, 
            isPlaying: false, 
            currentAudio: null 
          }));
        };
        
        utterance.onerror = () => {
          setAudioState(prev => ({ 
            ...prev, 
            isPlaying: false, 
            isLoading: false,
            error: 'حدث خطأ في تشغيل الصوت'
          }));
        };
        
        speechSynthesis.speak(utterance);
      } else {
        throw new Error('المتصفح لا يدعم تشغيل النص الصوتي');
      }
    } catch (error) {
      setAudioState(prev => ({ 
        ...prev, 
        isLoading: false, 
        error: 'حدث خطأ في تشغيل الصوت' 
      }));
    }
  };

  const stopAudio = () => {
    if ('speechSynthesis' in window) {
      speechSynthesis.cancel();
    }
    setAudioState({
      isPlaying: false,
      currentAudio: null,
      isLoading: false,
      error: null
    });
  };

  const currentSection = guideData.find(section => section.id === activeTab);

  return (
    <div className="min-h-screen bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50">
      <div className="container mx-auto px-4 py-8">
        <PageHeader
          title="دليل المعلم التفاعلي"
          subtitle="شرح شامل ومفصل لجميع أدوات لوحة التحكم الخاصة بالمعلم"
          backTo="/teacher-dashboard"
          className="mb-8"
        >
          <div className="flex items-center gap-2">
            <Button
              variant="outline"
              size="sm"
              onClick={() => window.open('/standalone-tour', '_blank')}
              className="flex items-center gap-2"
            >
              <ExternalLink className="h-4 w-4" />
              جولة تفاعلية
            </Button>
            {currentSection && (
              <Button
                variant={audioState.isPlaying ? "destructive" : "default"}
                size="sm"
                onClick={() => audioState.isPlaying ? stopAudio() : playTextToSpeech(currentSection.audioText || currentSection.description)}
                disabled={audioState.isLoading}
                className="flex items-center gap-2"
              >
                {audioState.isLoading ? (
                  <div className="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
                ) : audioState.isPlaying ? (
                  <VolumeX className="h-4 w-4" />
                ) : (
                  <Headphones className="h-4 w-4" />
                )}
                {audioState.isLoading ? 'جاري التحميل...' : audioState.isPlaying ? 'إيقاف الصوت' : 'شرح صوتي'}
              </Button>
            )}
          </div>
        </PageHeader>

        <Tabs value={activeTab} onValueChange={setActiveTab} className="space-y-6">
          {/* Navigation Tabs */}
          <div className="bg-white rounded-lg shadow-sm p-2">
            <TabsList className="grid w-full grid-cols-4 lg:grid-cols-11 gap-1">
              <TabsTrigger value="overview" className="text-xs">
                نظرة عامة
              </TabsTrigger>
              {guideData.map((section) => {
                const Icon = section.icon;
                return (
                  <TabsTrigger 
                    key={section.id} 
                    value={section.id}
                    className="flex flex-col items-center gap-1 text-xs p-2"
                  >
                    <Icon className="h-4 w-4" />
                    <span className="hidden sm:block">{section.title}</span>
                  </TabsTrigger>
                );
              })}
            </TabsList>
          </div>

          {/* Overview Tab */}
          <TabsContent value="overview" className="space-y-6">
            <Card className="bg-gradient-to-r from-blue-600 to-purple-600 text-white">
              <CardHeader>
                <CardTitle className="text-2xl flex items-center gap-2">
                  <Lightbulb className="h-6 w-6" />
                  مرحباً بك في دليل المعلم الشامل
                </CardTitle>
                <CardDescription className="text-blue-100">
                  هذا الدليل سيساعدك في إتقان جميع أدوات النظام لإدارة فصلك بكفاءة عالية
                </CardDescription>
              </CardHeader>
              <CardContent>
                <div className="grid grid-cols-1 md:grid-cols-3 gap-4">
                  <div className="flex items-center gap-2">
                    <CheckCircle2 className="h-5 w-5 text-green-300" />
                    <span>شرح تفاعلي مفصل</span>
                  </div>
                  <div className="flex items-center gap-2">
                    <PlayCircle className="h-5 w-5 text-green-300" />
                    <span>شرح صوتي لكل قسم</span>
                  </div>
                  <div className="flex items-center gap-2">
                    <Target className="h-5 w-5 text-green-300" />
                    <span>أمثلة عملية واضحة</span>
                  </div>
                </div>
              </CardContent>
            </Card>

            <div className="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
              {guideData.map((section) => {
                const Icon = section.icon;
                return (
                  <Card 
                    key={section.id}
                    className="cursor-pointer hover:shadow-lg transition-all duration-200 group"
                    onClick={() => setActiveTab(section.id)}
                  >
                    <CardHeader>
                      <div className="flex items-center gap-3 mb-2">
                        <div className={`p-2 rounded-lg ${section.color} text-white group-hover:scale-110 transition-transform`}>
                          <Icon className="h-5 w-5" />
                        </div>
                        <div>
                          <CardTitle className="text-lg">{section.title}</CardTitle>
                          <Badge variant="outline" className="mt-1">
                            {section.steps.length} خطوات
                          </Badge>
                        </div>
                      </div>
                      <CardDescription>{section.description}</CardDescription>
                    </CardHeader>
                    {section.image && (
                      <CardContent className="pt-0">
                        <img 
                          src={section.image} 
                          alt={section.title}
                          className="w-full h-32 object-cover rounded-md"
                        />
                      </CardContent>
                    )}
                  </Card>
                );
              })}
            </div>
          </TabsContent>

          {/* Individual Section Tabs */}
          {guideData.map((section) => (
            <TabsContent key={section.id} value={section.id} className="space-y-6">
              {/* Section Header */}
              <Card className="bg-gradient-to-r from-white to-gray-50 border-l-4 border-l-blue-500">
                <CardHeader>
                  <div className="flex items-start justify-between">
                    <div className="flex items-center gap-3">
                      <div className={`p-3 rounded-lg ${section.color} text-white`}>
                        <section.icon className="h-6 w-6" />
                      </div>
                      <div>
                        <CardTitle className="text-2xl">{section.title}</CardTitle>
                        <CardDescription className="text-base mt-1">
                          {section.description}
                        </CardDescription>
                      </div>
                    </div>
                    <Button
                      variant={audioState.isPlaying ? "destructive" : "default"}
                      size="sm"
                      onClick={() => audioState.isPlaying ? stopAudio() : playTextToSpeech(section.audioText || section.description)}
                      disabled={audioState.isLoading}
                    >
                      {audioState.isLoading ? (
                        <div className="animate-spin rounded-full h-4 w-4 border-b-2 border-white"></div>
                      ) : audioState.isPlaying ? (
                        <VolumeX className="h-4 w-4" />
                      ) : (
                        <Volume2 className="h-4 w-4" />
                      )}
                    </Button>
                  </div>
                </CardHeader>
                {section.image && (
                  <CardContent>
                    <img 
                      src={section.image} 
                      alt={section.title}
                      className="w-full max-w-2xl mx-auto rounded-lg shadow-sm"
                    />
                  </CardContent>
                )}
              </Card>

              {/* Steps Accordion */}
              <Card>
                <CardHeader>
                  <CardTitle className="flex items-center gap-2">
                    <ClipboardList className="h-5 w-5" />
                    خطوات التنفيذ التفصيلية
                  </CardTitle>
                </CardHeader>
                <CardContent>
                  <Accordion type="multiple" className="w-full">
                    {section.steps.map((step, index) => (
                      <AccordionItem key={index} value={`step-${index}`}>
                        <AccordionTrigger className="text-right">
                          <div className="flex items-center gap-3">
                            <div className="bg-blue-500 text-white rounded-full h-6 w-6 flex items-center justify-center text-sm font-bold">
                              {index + 1}
                            </div>
                            <span className="font-medium">{step.title}</span>
                          </div>
                        </AccordionTrigger>
                        <AccordionContent className="space-y-4 pr-9">
                          <p className="text-gray-600">{step.description}</p>
                          
                          <div className="space-y-2">
                            <h4 className="font-medium text-gray-900">التفاصيل:</h4>
                            <ul className="space-y-1">
                              {step.details.map((detail, detailIndex) => (
                                <li key={detailIndex} className="flex items-start gap-2">
                                  <ChevronRight className="h-4 w-4 text-blue-500 mt-0.5 flex-shrink-0" />
                                  <span className="text-gray-700">{detail}</span>
                                </li>
                              ))}
                            </ul>
                          </div>

                          {step.tips && (
                            <div className="bg-yellow-50 border border-yellow-200 rounded-lg p-3">
                              <h4 className="font-medium text-yellow-800 mb-2 flex items-center gap-2">
                                <Lightbulb className="h-4 w-4" />
                                نصائح مفيدة:
                              </h4>
                              <ul className="space-y-1">
                                {step.tips.map((tip, tipIndex) => (
                                  <li key={tipIndex} className="flex items-start gap-2">
                                    <CheckCircle2 className="h-4 w-4 text-yellow-600 mt-0.5 flex-shrink-0" />
                                    <span className="text-yellow-800">{tip}</span>
                                  </li>
                                ))}
                              </ul>
                            </div>
                          )}
                        </AccordionContent>
                      </AccordionItem>
                    ))}
                  </Accordion>
                </CardContent>
              </Card>
            </TabsContent>
          ))}
        </Tabs>

        {/* Audio Error Toast */}
        {audioState.error && (
          <div className="fixed bottom-4 right-4 bg-red-500 text-white px-4 py-2 rounded-lg shadow-lg">
            {audioState.error}
          </div>
        )}
      </div>
    </div>
  );
};

export default TeacherGuide;